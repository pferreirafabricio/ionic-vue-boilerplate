{"version":3,"file":"js/478.8f77bc93.js","mappings":"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","sources":["webpack://app-boilerplate/./src/composition/useToast.js","webpack://app-boilerplate/./src/components/Button.vue","webpack://app-boilerplate/./src/components/Button.vue?4e0d","webpack://app-boilerplate/./src/utils/index.js","webpack://app-boilerplate/./src/store/login.js","webpack://app-boilerplate/./src/composition/redirectToHome.js","webpack://app-boilerplate/./src/composition/login.js","webpack://app-boilerplate/./src/pages/Login.vue","webpack://app-boilerplate/./src/pages/Login.vue?619c"],"sourcesContent":["import { toastController } from \"@ionic/vue\";\n\nexport default function () {\n  /**\n   * Shows a notification\n   * @param {string} message\n   * @param {string} color\n   * @param {string} position\n   * @param {number} duration\n   * @returns\n   */\n  async function openToast(message, color, position = \"top\", duration = 3000) {\n    const toast = await toastController.create({\n      message,\n      position,\n      color,\n      duration,\n    });\n\n    return toast.present();\n  }\n\n  return {\n    openToast,\n  };\n}\n","<template>\n  <ion-button\n    class=\"btn ion-activatable ripple-parent\"\n    :color=\"color\"\n    :expand=\"expand\"\n    :size=\"size\"\n    :disabled=\"isLoading\"\n    :fill=\"fill\"\n    :download=\"download\"\n    :href=\"href\"\n    @click=\"!!to && redirectToRoute()\"\n  >\n    <ion-label v-if=\"text && !iconOnly\" :class=\"[hasIcon ? 'ml-2' : '']\">{{\n      text\n    }}</ion-label>\n    <ion-icon\n      v-if=\"hasIcon\"\n      :slot=\"iconOnly ? 'icon-only' : 'start'\"\n      :ios=\"iosIcon || icon\"\n      :md=\"mdIcon || icon\"\n    ></ion-icon>\n    <ion-spinner\n      v-if=\"isLoading\"\n      slot=\"end\"\n      :class=\"iconOnly ? '' : 'ion-margin-start'\"\n      :name=\"spinnerName\"\n    ></ion-spinner>\n    <ion-ripple-effect type=\"unbounded\"></ion-ripple-effect>\n  </ion-button>\n</template>\n\n<script setup>\nimport {\n  IonButton,\n  IonLabel,\n  IonIcon,\n  IonSpinner,\n  IonRippleEffect,\n} from \"@ionic/vue\";\nimport { defineProps, computed, toRefs } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nconst props = defineProps({\n  color: {\n    type: String,\n    default: \"primary\",\n  },\n  text: {\n    type: String,\n    required: false,\n  },\n  expand: {\n    type: String,\n    default: \"block\",\n  },\n  size: {\n    type: String,\n    default: \"medium\",\n  },\n  icon: {\n    default: null,\n    required: false,\n  },\n  iosIcon: {\n    default: null,\n    required: false,\n  },\n  mdIcon: {\n    default: null,\n    required: false,\n  },\n  isLoading: {\n    type: Boolean,\n    default: false,\n  },\n  spinnerName: {\n    type: String,\n    default: \"crescent\",\n  },\n  iconOnly: {\n    type: Boolean,\n    default: false,\n  },\n  fill: {\n    type: String,\n    default: \"solid\",\n  },\n  to: {\n    type: [String, Object],\n    required: false,\n  },\n  download: {\n    type: Boolean,\n    default: false,\n  },\n  href: {\n    type: String,\n    required: false,\n  },\n});\n\nconst { icon, iosIcon, mdIcon, to } = toRefs(props);\n\nconst hasIcon = computed(() => {\n  return icon.value || iosIcon.value || mdIcon.value;\n});\n\nconst router = useRouter();\n\nfunction redirectToRoute() {\n  if (!to.value) return;\n\n  router.push(to.value);\n}\n</script>\n\n<style scoped>\n.btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n</style>\n","import script from \"./Button.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Button.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Button.vue?vue&type=style&index=0&id=91873b5e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-91873b5e\"]])\n\nexport default __exports__","export function makeString(length) {\n  let result = \"\";\n  const characters =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charactersLength = characters.length;\n  let counter = 0;\n  while (counter < length) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    counter += 1;\n  }\n  return result;\n}\n","import api from \"@/api\";\nimport { Preferences } from \"@capacitor/preferences\";\nimport { defineStore } from \"pinia\";\nimport UserTypes from \"../enums/UserTypes\";\nimport { makeString } from \"../utils\";\n\nexport const useLoginStore = defineStore(\"login\", {\n  actions: {\n    async setToken(token) {\n      await Preferences.set({\n        key: \"token\",\n        value: token,\n      });\n    },\n    async setUserData(userData) {\n      await Preferences.set({\n        key: \"user\",\n        value: JSON.stringify({\n          userId: userData.id,\n          userType: userData.typeUser,\n          userName: userData.userName,\n        }),\n      });\n    },\n    async login(userCredentials) {\n      /**\n       * This is a fake login, you can remove this if\n       */\n      if (\n        userCredentials.email === \"admin\" &&\n        userCredentials.password === \"admin\"\n      ) {\n        return await this.fakeLogin();\n      }\n\n      return api\n        .post(\"/login\", userCredentials)\n        .then(async (response) => {\n          await this.setToken(response.token);\n          await this.setUserData(response.data);\n\n          return response.data;\n        })\n        .catch((error) => error.response);\n    },\n    /**\n     * This is a fake login, you can remove this method\n     */\n    async fakeLogin() {\n      await this.setToken(makeString(20));\n      await this.setUserData({\n        id: 1,\n        typeUser: UserTypes.ADMINISTRATOR,\n        userName: \"Admin\",\n      });\n\n      return {\n        data: {\n          userType: UserTypes.ADMINISTRATOR,\n        },\n      };\n    },\n  },\n});\n","import { useRouter } from \"vue-router\";\nimport HomeRoutesByUser from \"../enums/HomeRoutesByUser\";\n\nexport default function () {\n  const router = useRouter();\n\n  /**\n   * Redirect user by type\n   * @param {number | string} userTypeId\n   * @param {object} routeParams\n   * @param {boolean} reload\n   * @returns\n   */\n  function redirectTo(userTypeId, routeParams, reload = false) {\n    if (!reload) {\n      router.push({\n        name: HomeRoutesByUser[userTypeId] || \"logout\",\n        params: routeParams,\n      });\n      return;\n    }\n\n    const redirect = router.resolve({\n      name: HomeRoutesByUser[userTypeId] || \"logout\",\n      params: routeParams,\n    });\n\n    window.location = redirect.href;\n  }\n\n  return {\n    redirectTo,\n  };\n}\n","import { useLoginStore } from \"../store/login\";\nimport redirectToHome from \"./redirectToHome\";\nimport useToast from \"./useToast\";\n\nexport default function () {\n  const { openToast } = useToast();\n  const { redirectTo } = redirectToHome();\n  const loginStore = useLoginStore();\n\n  async function userLogin(userCredentials) {\n    const data = {\n      email: userCredentials.email,\n      password: userCredentials.password,\n    };\n\n    loginStore\n      .login(data)\n      .then((response) => {\n        openToast(\"Logged with success\", \"success\", \"top\");\n\n        redirectTo(response.data.userType, {\n          anyCustomParams: response.customParams,\n        });\n\n        return Promise.resolve();\n      })\n      .catch((ex) => {\n        openToast(\"Something was wrong on login\", \"danger\", \"top\");\n        Promise.reject(ex);\n      });\n  }\n\n  return {\n    userLogin,\n    openToast,\n    redirectTo,\n  };\n}\n","<template>\n  <base-layout\n    page-default-back-link=\"/home\"\n    :show-menu-button=\"false\"\n  >\n    <ion-row>\n      <ion-col size=\"12\">\n        <Image style=\"height: 200px\" src=\"assets/icon/logo.png\" />\n      </ion-col>\n    </ion-row>\n    <ion-row>\n      <ion-col size=\"12\">\n        <ion-item class=\"form-field\">\n          <ion-icon slot=\"start\" :icon=\"Icon.mail\"></ion-icon>\n          <ion-input\n            v-model=\"fields.email\"\n            clear-input\n            required\n            label=\"E-mail\"\n            type=\"email\"\n            label-placement=\"floating\"\n            tabindex=\"1\"\n            inputmode=\"email\"\n            placeholder=\"admin\"\n            @input=\"errorMessages.email = ''\"\n          ></ion-input>\n        </ion-item>\n        <error-message :text=\"errorMessages.email\" />\n      </ion-col>\n      <ion-col size=\"12\">\n        <ion-item class=\"form-field\">\n          <ion-icon slot=\"start\" :icon=\"Icon.key\"></ion-icon>\n          <ion-input\n            v-model=\"fields.password\"\n            required\n            name=\"password\"\n            label=\"Password\"\n            tabindex=\"2\"\n            label-placement=\"floating\"\n            placeholder=\"admin\"\n            clear-input\n            :type=\"showPassword ? 'text' : 'password'\"\n            @input=\"errorMessages.password = ''\"\n          ></ion-input>\n          <ion-icon\n            slot=\"end\"\n            :icon=\"showPassword ? Icon.eyeOff : Icon.eye\"\n            class=\"pointer\"\n            @click=\"showPassword = !showPassword\"\n          ></ion-icon>\n        </ion-item>\n        <error-message :text=\"errorMessages.password\" />\n      </ion-col>\n    </ion-row>\n    <ion-row>\n      <ion-col size=\"12\">\n        <Button\n          color=\"primary\"\n          text=\"Login\"\n          :icon=\"Icon.enterOutline\"\n          :is-loading=\"loading\"\n          @click=\"loginUser()\"\n        />\n      </ion-col>\n    </ion-row>\n    <ion-row class=\"ion-text-center\">\n      <ion-col size=\"12\">\n        <ion-text color=\"tertiary\" class=\"pointer\" @click=\"redirectToRecoveryPassword()\">\n          Forgot password?\n        </ion-text>\n      </ion-col>\n    </ion-row>\n  </base-layout>\n</template>\n\n<script setup>\nimport { enterOutline, mail, key, logIn, eye, eyeOff } from \"ionicons/icons\";\n\nimport {\n  IonInput,\n  IonRow,\n  IonCol,\n  IonItem,\n  IonIcon,\n  IonText,\n} from \"@ionic/vue\";\n\nimport { useRouter } from \"vue-router\";\nimport { ref } from \"vue\";\n\nimport Button from \"../components/Button.vue\";\nimport Image from \"../components/Image.vue\";\nimport login from \"../composition/login\";\nimport emitter from \"../plugins/emitter\";\n\nconst { userLogin } = login();\nconst router = useRouter();\n\nconst showPassword = ref(false);\n\nconst Icon = ref({\n  mail,\n  key,\n  eye,\n  eyeOff,\n  logIn,\n  enterOutline,\n});\n\nconst fields = ref({\n  email: \"admin\",\n  password: \"admin\",\n});\n\nconst errorMessages = ref({\n  email: \"\",\n  password: \"\",\n});\n\nconst loading = ref(false);\n\nfunction loginUser() {\n  if (!validateFields()) return;\n\n  loading.value = true;\n\n  userLogin(fields.value)\n    .then(() => {\n      emitter.emit(\"logged\");\n    })\n    .finally(() => {\n      loading.value = false;\n    });\n}\nfunction validateFields() {\n  let valid = true;\n\n  if (!fields.value.email) {\n    errorMessages.value.email = \"Email invalid\";\n    valid = false;\n  }\n\n  if (!fields.value.password) {\n    errorMessages.value.password = \"Password invalid\";\n    valid = false;\n  }\n\n  return valid;\n}\n\nfunction redirectToRecoveryPassword() {\n  router.push({ name: \"recovery-password\" });\n}\n</script>\n\n<style scoped>\n.form-field {\n  display: flex;\n  align-items: center;\n}\n\n.pointer {\n  cursor: pointer;\n}\n</style>\n./useEmitter","import script from \"./Login.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Login.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=c5eb3ed8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c5eb3ed8\"]])\n\nexport default __exports__"],"names":["async","openToast","message","color","position","duration","toast","toastController","create","present","icon","iosIcon","mdIcon","to","toRefs","props","hasIcon","computed","value","router","useRouter","redirectToRoute","push","__exports__","makeString","length","result","characters","charactersLength","counter","charAt","Math","floor","random","useLoginStore","defineStore","actions","setToken","token","Preferences","set","key","setUserData","userData","JSON","stringify","userId","id","userType","typeUser","userName","login","userCredentials","email","password","this","fakeLogin","api","post","then","response","data","catch","error","UserTypes","ADMINISTRATOR","redirectTo","userTypeId","routeParams","reload","name","HomeRoutesByUser","params","redirect","resolve","window","location","href","useToast","redirectToHome","loginStore","userLogin","anyCustomParams","customParams","Promise","ex","reject","showPassword","ref","Icon","mail","eye","eyeOff","logIn","enterOutline","fields","errorMessages","loading","loginUser","validateFields","emitter","emit","finally","valid","redirectToRecoveryPassword"],"sourceRoot":""}